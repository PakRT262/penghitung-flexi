<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Penghitung Flexi Pegawai (Detik)</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Comic Neue', cursive, Arial, sans-serif;
      margin: 40px auto;
      max-width: 500px;
      background: #f0f8ff;
      color: #333;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 20px 30px;
      border-radius: 12px;
    }
    h2 {
      text-align: center;
      color: #0066cc;
      margin-bottom: 15px;
    }
    label, select, input, button {
      display: block;
      margin: 10px 0;
      width: 100%;
      font-size: 16px;
    }
    select, input {
      padding: 10px;
      border-radius: 8px;
      border: 1.5px solid #0066cc;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }
    select:focus, input:focus {
      border-color: #004080;
      outline: none;
    }
    button {
      margin-top: 20px;
      background: #0066cc;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,102,204,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #004080;
    }
    .result {
      margin-top: 25px;
      padding: 20px;
      border: 2px dashed #0066cc;
      border-radius: 12px;
      background: #e6f0ff;
      font-size: 18px;
      text-align: center;
      min-height: 80px;
    }
    /* Tambahan gambar header */
    .header-img {
      display: block;
      margin: 0 auto 15px;
      width: 100px;
      filter: drop-shadow(1px 1px 1px #999);
      animation: bounce 2s infinite;
    }
    /* Animasi bounce sederhana */
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    /* Icon di tombol */
    .btn-icon {
      width: 20px;
      height: 20px;
      filter: invert(1);
    }
  </style>
</head>
<body>
  <h2>Penghitung Flexi Pegawai</h2>
  <img src="https://cdn-icons-png.flaticon.com/512/2921/2921822.png" alt="Clock Icon" class="header-img" />
  
  <label for="hari">Hari:</label>
  <select id="hari">
    <option value="Senin">Senin</option>
    <option value="Selasa">Selasa</option>
    <option value="Rabu">Rabu</option>
    <option value="Kamis">Kamis</option>
    <option value="Jumat">Jumat</option>
  </select>

  <label for="jamMasuk">Jam Masuk:</label>
  <!-- step="1" supaya bisa input detik -->
  <input type="time" id="jamMasuk" step="1" required />

  <button onclick="hitung()">
    <img src="https://cdn-icons-png.flaticon.com/512/60/60525.png" alt="Calculate Icon" class="btn-icon" />
    Hitung
  </button>

  <div class="result" id="hasil"></div>

  <script>
    function hitung() {
      const hari = document.getElementById("hari").value;
      const jamMasukInput = document.getElementById("jamMasuk").value;
      const hasilDiv = document.getElementById("hasil");

      if (!jamMasukInput) {
        hasilDiv.innerHTML = "â° Silakan masukkan jam masuk.";
        return;
      }

      // Jam masuk dengan detik, format input "HH:MM:SS"
      const jamMasuk = new Date(`1970-01-01T${jamMasukInput}`);

      // Jam kerja mulai dan toleransi
      const jamKerjaMulai = new Date(`1970-01-01T07:30:00`);
      const toleransiMasuk = new Date(`1970-01-01T08:30:00`);

      // Jam pulang standar
      let jamPulang = hari === "Jumat"
        ? new Date(`1970-01-01T16:30:00`)
        : new Date(`1970-01-01T16:00:00`);

      let status = "Tepat Waktu ðŸ˜Š";
      let keterlambatanMs = 0;

      if (jamMasuk > jamKerjaMulai && jamMasuk <= toleransiMasuk) {
        keterlambatanMs = jamMasuk - jamKerjaMulai;
        jamPulang = new Date(jamPulang.getTime() + keterlambatanMs);

        // Bulatkan jam pulang ke atas detik terdekat
        jamPulang.setMilliseconds(0);
        if (jamPulang.getSeconds() > 0) {
          jamPulang.setSeconds(jamPulang.getSeconds() + 1);
        }

        const keterlambatanDetik = Math.ceil(keterlambatanMs / 1000);
        const menit = Math.floor(keterlambatanDetik / 60);
        const detik = keterlambatanDetik % 60;
        status = `Terlambat â³ ${menit} menit ${detik} detik`;
      } else if (jamMasuk > toleransiMasuk) {
        status = "Terlambat Melebihi Toleransi! ðŸš¨";
      }

      function formatJam(date) {
        return date.toTimeString().substring(0, 8); // HH:MM:SS
      }

      let hasil = `<strong>Status:</strong> ${status}<br>`;
      if (status.startsWith("Terlambat")) {
        hasil += `<strong>Jam Pulang Seharusnya:</strong> ${formatJam(jamPulang)}`;
      } else if (status === "Tepat Waktu ðŸ˜Š") {
        hasil += `<strong>Jam Pulang:</strong> ${formatJam(jamPulang)}`;
      }

      hasilDiv.innerHTML = hasil;
    }
  </script>
</body>
</html>
